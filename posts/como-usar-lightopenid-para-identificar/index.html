<!doctype html><html lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta http-equiv=cache-control content="public"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Hugo 0.62.0"><title>Login con LightopenID • Marcos Costales</title><meta name=twitter:card content="summary"><meta name=twitter:title content="Login con LightopenID"><meta name=twitter:description content="Cuando desarrollamos una web la mayoría de las veces sólo nos interesa saber si el usuario está logeado o no para poder escribir comentarios, votar&mldr; Desarrollar un sistema de identificación es muy crítico, debido al manejo de datos tan importantes como las contraseñas o emails.
¡Pues una solución genial es usar openID!
¿Qué es openID como usuario de una web? Pues digamos que tienes una cuenta de Gmail, pues te identificas en una web con esa cuenta y ya quedas identificado, evitando tener que registrarte mil veces para mil webs."><meta property="og:title" content="Login con LightopenID"><meta property="og:description" content="Cuando desarrollamos una web la mayoría de las veces sólo nos interesa saber si el usuario está logeado o no para poder escribir comentarios, votar&mldr; Desarrollar un sistema de identificación es muy crítico, debido al manejo de datos tan importantes como las contraseñas o emails.
¡Pues una solución genial es usar openID!
¿Qué es openID como usuario de una web? Pues digamos que tienes una cuenta de Gmail, pues te identificas en una web con esa cuenta y ya quedas identificado, evitando tener que registrarte mil veces para mil webs."><meta property="og:type" content="article"><meta property="og:url" content="https://costales.github.io/posts/como-usar-lightopenid-para-identificar/"><meta property="article:published_time" content="2011-10-25T19:34:00+02:00"><meta property="article:modified_time" content="2011-10-25T19:34:00+02:00"><link rel=stylesheet href=/scss/hyde-hyde.7520f35efecc324a99b3726ed2b2ad961648af81ff945c3bf2c67f371b5262ab.css integrity="sha256-dSDzXv7MMkqZs3Ju0rKtlhZIr4H/lFw78sZ/NxtSYqs="><link rel=stylesheet href=/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58+TzH3icCkSHGoJ+ed7w=" media=print><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><div class=sidebar><div class=container><div class=sidebar-about><span class=site__title><a href=https://costales.github.io/>Marcos Costales</a></span><div class=author-image><img src=https://costales.github.io/img/avatar.jpeg alt="Author Image" class="img--circle img--headshot element--center"></div><p class=site__description></p></div><div class=collapsible-menu><input type=checkbox id=menuToggle>
<label for=menuToggle>Marcos Costales</label><div class=menu-content><div><ul class=sidebar-nav><li><a href=/><span>Blog</span></a></li><li><a href=/projects/all/><span>Projects</span></a></li><li><a href=/about/><span>About Me</span></a></li></ul></div><section class=social><a href=https://github.com/costales rel=me><i class="fab fa-github fa-lg" aria-hidden=true></i></a><a href=https://www.youtube.com/user/costalesmarcos/videos rel=me><i class="fab fa-youtube fa-lg" aria-hidden=true></i></a><a href=https://linkedin.com/in/costales rel=me><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a><a href=/index.xml rel=me><i class="fas fa-rss fa-lg" aria-hidden=true></i></a><a href=/posts/ rel=me><i class="fab fa-blogger" aria-hidden=true></i></a><a href=mailto:25uvnwtt@duck.com rel=me><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></section></div></div></div></div><div class="content container"><article><header><h1>Login con LightopenID</h1><div class=post__meta><i class="fas fa-calendar-alt"></i>Oct 25, 2011<br><i class="fas fa-tags"></i><a class="badge badge-tag" href=/tags/software>software</a></div></header><div class=post><p>Cuando desarrollamos una web la mayoría de las veces sólo nos interesa saber si el usuario está <em>logeado</em> o no para poder escribir comentarios, votar&mldr; Desarrollar un sistema de identificación es muy crítico, debido al manejo de datos tan importantes como las contraseñas o emails.</p><p>¡Pues una solución genial es usar <a href=https://openid.net/>openID</a>!</p><p><strong>¿Qué es openID como usuario de una web?</strong> Pues digamos que tienes una cuenta de Gmail, pues te identificas en una web con esa cuenta y ya quedas identificado, evitando tener que registrarte mil veces para mil webs. Existen varios <a href=https://openid.net/get-an-openid/>proveedores de openID</a>, como Google, Yahoo!, Flickr&mldr; ¡y con ellos ya tienes una cuenta openID!</p><p><strong>¿Qué es openID como servidor (web)?</strong> Una manera de evitar almacenar y gestionar información muy confidencial y crítica, y evitar al usuario la tediosa tarea de registro, usando para ella su cuenta openID.</p><p><strong>¿Cómo implemento openID en mi web (servidor)?</strong> Hay <a href=https://openid.net/developers/libraries/>múltiples librerías</a> para distintos lenguajes que facilitan el uso de openID.<br>En mi caso voy a usar <a href=https://code.google.com/p/lightopenid/>LightOpenID</a> para PHP. Copiamos la librería openid.php en el directorio junto a los siguientes ficheros que crearemos en el mismo directorio:</p><p><strong>login.php</strong>: Primer fichero para logearnos, mostrará los proveedores como un enlace, ponerlo guapo ya es tarea tuya ;)<br>`&lt;?php<br>session_start();<br>if (isset($_SESSION[&lsquo;logueado&rsquo;])) {<br>    echo &ldquo;Logueado&rdquo;;<br>}<br>else<br>{<br>    require_once &lsquo;openid.php&rsquo;;<br>    $openid_google = new LightOpenID(&ldquo;<a href=https://tu_servidor.com%22);>https://tu_servidor.com");</a><br>    $openid_google->identity = &lsquo;<a href="https://www.google.com/accounts/o8/id';">https://www.google.com/accounts/o8/id';</a><br>    $openid_google->returnUrl = &lsquo;setID.php&rsquo;;</p><p>    $openid_yahoo = new LightOpenID(&ldquo;<a href=https://tu_servidor.com%22);>https://tu_servidor.com");</a><br>    $openid_yahoo->identity = &lsquo;<a href="https://me.yahoo.com/';">https://me.yahoo.com/';</a><br>    $openid_yahoo->returnUrl = &lsquo;setID.php&rsquo;;<br>}<br>?><br><a href="<?php echo $openid_google->authUrl() ?>">Entrar con cuenta de Google</a><br><a href="<?php echo $openid_yahoo->authUrl() ?>">Entrar con cuenta de Yahoo!</a>`</p><p>El código en verde lo explicaré más adelante, lo que nos importa ahora es el naranja. Definimos cada proveedor de openID que queremos usar y creamos un enlace que al pulsarlo invocará una web externa con el proveedor, por ejemplo Google, que si damos el permiso llamará al fichero siguiente (especificado por $openid_google->returnUrl) en nuestro servidor.</p><p><strong>setID.php</strong>: Es el fichero que recibe la respuesta del proveedor de openID (por ejemplo Google, Yahoo!, myOpenID&mldr;) tras login.php:<br><code>&lt;?php session_start(); require_once 'openid.php'; $openid = new LightOpenID("https://tu_servidor.com");  if ($openid->mode) {     if ($openid->mode == 'cancel') {         echo "Cancelado";     } elseif($openid->validate()) {         $_SESSION['logueado'] = $openid->identity;         echo "logueado";     } else {         echo "No logueado";     } } else {     echo "No vienes desde login.php"; } ?></code><br>Aquí comprobamos qué nos devolvió el proveedor de openID (por ejemplo Google) y devolvemos un resultado al cliente, sería ideal por ejemplo invocar la página principal automáticamente con una redirección PHP.</p><p><strong>logout.php</strong>: Para desloguearnos creamos un fichero que contendrá lo siguiente:<br><code>&lt;?php session_start(); session_destroy(); echo "No Logged"; ?></code><br>No hay nada naranja :P Cierto, aquí ya no interviene openID.</p><p><strong>Resumiendo,</strong> como veis usar openID con LightOpenID es relativamente sencillo. Pero atención, identificarnos genera un identificador que proviene del proveedor de openID ($openid->identity) y es una cadena única que nos identifica, <strong>¡pero se pierde!</strong> tras salir de setID.php. ¿Cómo saber si estamos logueados en las siguientes páginas? Pues creamos <a href=https://www.arumeinformatica.es/blog/sesiones-en-php-que-son-y-como-funcionan/>una sesión PHP</a> con la que sabremos si estamos logueados o no (y es el código que está en verde). En login.php no ejecutamos ningún código si ya estamos logueados, en setID.php establecemos la sesión PHP y en logout.php la destruimos.</p><p>Resumiendo: Un sistema standard, eficaz, limpio, poco intrusivo y claro para identificar usuarios :)</p><p>Se pueden obtener datos como el email o nombre de usuario en algunos casos (devueltos por el proveedor en formato JSON) y jamás podremos obtener la contraseña del usuario.</p><p>Podemos usar selectores con jQuery para hacer un formulario mucho más vistoso, como <a href=https://code.google.com/p/openid-selector/>jQuery openID Simple</a>.</p><p>Las URLs para más proveedores son:</p><ul><li>Google: <a href=https://www.google.com/accounts/o8/id>https://www.google.com/accounts/o8/id</a></li><li>Yahoo: <a href=https://me.yahoo.com/>https://me.yahoo.com/</a></li><li>AOL: <a href=https://openid.aol.com/%7Busernam%7D>https://openid.aol.com/{usernam}</a></li><li>MyOpenID: https://{username}.myopenid.com/</li><li>LiveJournal: https://{username}.livejournal.com/</li><li>flickr: <a href=https://flickr.com/%7Busername%7D/>https://flickr.com/{username}/</a></li><li>technorati: <a href=https://technorati.com/people/technorati/%7Busername%7D/>https://technorati.com/people/technorati/{username}/</a></li><li>WordPress: https://{username}.wordpress.com/</li><li>Blogger: https://{username}.blogspot.com/</li><li>Verising: https://{username}.pip.verisignlabs.com/</li><li>vidoop: https://{username}.myvidoop.com/</li><li>launchpad: <a href=https://launchpad.net/~%7Busername%7D>https://launchpad.net/~{username}</a></li><li>ClaimID: <a href=https://claimid.com/%7Busername%7D>https://claimid.com/{username}</a></li><li>clickpass: <a href=https://clickpass.com/public/%7Busername%7D>https://clickpass.com/public/{username}</a></li><li>Google Profile: <a href=https://www.google.com/profiles/%7Busername%7D>https://www.google.com/profiles/{username}</a></li></ul><p>Enlace con buena explicación: <a href=https://jalvb.wordpress.com/tag/openid/>JAlvB</a>.</p></div><div class="navigation navigation-single"><a href=/posts/copia-de-seguridad-diaria-de-una-base/ class=navigation-prev><i aria-hidden=true class="fa fa-chevron-left"></i><span class=navigation-tittle>Copia de seguridad diaria de mySQL</span></a>
<a href=/posts/elimina-google-las-etiquetas-html-de/ class=navigation-next><span class=navigation-tittle>¿Elimina Google las etiquetas HTML de cierre en los InfoWindow de Google Maps?</span>
<i aria-hidden=true class="fa fa-chevron-right"></i></a></div></article></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-156677503-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script defer src=https://use.fontawesome.com/releases/v5.11.2/js/all.js integrity=sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1 crossorigin=anonymous></script><script type=text/javascript>hljs.initHighlightingOnLoad();</script></body></html>