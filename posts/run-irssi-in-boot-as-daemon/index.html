<!doctype html><html lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta http-equiv=cache-control content="public"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Hugo 0.62.0"><title>Run Irssi in the boot as daemon • Marcos Costales</title><meta name=twitter:card content="summary"><meta name=twitter:title content="Run Irssi in the boot as daemon"><meta name=twitter:description content="After the Irssi basic configuration&mldr;
 Check your runlevel:  runlevel
 For my runlevel 2, I'll create this file:  sudo nano /etc/init.d/irssi
With this content:
`#!/bin/bash
BEGIN INIT INFO Provides: irssid Required-Start: $network Required-Stop: $network Default-Start: 2 3 4 5 Default-Stop: 0 1 6 Short-Description: Start irssi daemon within screen session at boot time Description: This init script will start an irssi session under screen using the settings provided in /etc/irssid."><meta property="og:title" content="Run Irssi in the boot as daemon"><meta property="og:description" content="After the Irssi basic configuration&mldr;
 Check your runlevel:  runlevel
 For my runlevel 2, I'll create this file:  sudo nano /etc/init.d/irssi
With this content:
`#!/bin/bash
BEGIN INIT INFO Provides: irssid Required-Start: $network Required-Stop: $network Default-Start: 2 3 4 5 Default-Stop: 0 1 6 Short-Description: Start irssi daemon within screen session at boot time Description: This init script will start an irssi session under screen using the settings provided in /etc/irssid."><meta property="og:type" content="article"><meta property="og:url" content="https://costales.github.io/posts/run-irssi-in-boot-as-daemon/"><meta property="article:published_time" content="2014-03-31T21:30:00+02:00"><meta property="article:modified_time" content="2014-03-31T21:30:00+02:00"><link rel=stylesheet href=/scss/hyde-hyde.7520f35efecc324a99b3726ed2b2ad961648af81ff945c3bf2c67f371b5262ab.css integrity="sha256-dSDzXv7MMkqZs3Ju0rKtlhZIr4H/lFw78sZ/NxtSYqs="><link rel=stylesheet href=/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58+TzH3icCkSHGoJ+ed7w=" media=print><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><div class=sidebar><div class=container><div class=sidebar-about><span class=site__title><a href=https://costales.github.io/>Marcos Costales</a></span><div class=author-image><img src=https://costales.github.io/img/avatar.jpeg alt="Author Image" class="img--circle img--headshot element--center"></div><p class=site__description></p></div><div class=collapsible-menu><input type=checkbox id=menuToggle>
<label for=menuToggle>Marcos Costales</label><div class=menu-content><div><ul class=sidebar-nav><li><a href=/><span>Blog</span></a></li><li><a href=/projects/all/><span>Projects</span></a></li><li><a href=/about/><span>About Me</span></a></li></ul></div><section class=social><a href=https://github.com/costales rel=me><i class="fab fa-github fa-lg" aria-hidden=true></i></a><a href=https://www.youtube.com/user/costalesmarcos/videos rel=me><i class="fab fa-youtube fa-lg" aria-hidden=true></i></a><a href=https://linkedin.com/in/costales rel=me><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a><a href=https://stackoverflow.com/users/1609813/costales rel=me><i class="fab fa-stack-overflow fa-lg" aria-hidden=true></i></a><a href=/index.xml rel=me><i class="fas fa-rss fa-lg" aria-hidden=true></i></a><a href=/posts/ rel=me><i class="fab fa-blogger" aria-hidden=true></i></a><a href=mailto:hf717s2j@duck.com rel=me><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></section></div></div></div></div><div class="content container"><article><header><h1>Run Irssi in the boot as daemon</h1><div class=post__meta><i class="fas fa-calendar-alt"></i>Mar 31, 2014<br><i class="fas fa-tags"></i><a class="badge badge-tag" href=/tags/irssi>irssi</a>
<a class="badge badge-tag" href=/tags/server>server</a></div></header><div class=post><p>After the Irssi <a href=https://wiki.archlinux.org/index.php/irssi#Configuration>basic configuration</a>&mldr;</p><ul><li>Check your runlevel:</li></ul><p><code>runlevel</code></p><ul><li>For my runlevel 2, I'll create this file:</li></ul><p><code>sudo nano /etc/init.d/irssi</code><br>With this content:<br>`#!/bin/bash</p><h3 id=begin-init-info>BEGIN INIT INFO</h3><h1 id=provides-irssid>Provides:          irssid</h1><h1 id=required-start-network>Required-Start:    $network</h1><h1 id=required-stop-network>Required-Stop:     $network</h1><h1 id=default-start-2-3-4-5>Default-Start:     2 3 4 5</h1><h1 id=default-stop-0-1-6>Default-Stop:      0 1 6</h1><h1 id=short-description-start-irssi-daemon-within-screen-session-at-boot-time>Short-Description: Start irssi daemon within screen session at boot time</h1><h1 id=description-this-init-script-will-start-an-irssi-session-under-screen-using-the-settings-provided-in-etcirssidconf>Description:       This init script will start an irssi session under screen using the settings provided in /etc/irssid.conf</h1><h3 id=end-init-info>END INIT INFO</h3><h1 id=include-the-lsb-library-functions>Include the LSB library functions</h1><p>. /lib/lsb/init-functions</p><h1 id=setup-static-variables>Setup static variables</h1><p>configFile=&rsquo;/etc/irssid.conf&rsquo;<br>daemonExec=&rsquo;/usr/bin/screen&rsquo;<br>daemonArgs=&rsquo;-D -m&rsquo;<br>daemonName="$(basename &ldquo;$daemonExec&rdquo;)&rdquo;<br>pidFile=&rsquo;/home/your_user/.irssi/irssid.pid&rsquo;</p><h1 id=heading></h1><h1 id=checks-if-the-environment-is-capable-of-running-the-script-such-as>Checks if the environment is capable of running the script (such as</h1><h1 id=availability-of-programs-etc>availability of programs etc).</h1><h1 id=heading-1></h1><h1 id=return-0-if-the-environmnt-is-properly-setup-for-execution-of-init-script-1>Return: 0 if the environmnt is properly setup for execution of init script, 1</h1><p>#         if not all conditions have been met.</p><h1 id=heading-2></h1><p>function checkEnvironment() {<br>    # Verify that the necessary binaries are available for execution.<br>    local binaries=(irssi screen)</p><p>    for bin in &ldquo;${binaries[@]}"; do<br>        if ! which &ldquo;$bin&rdquo; > /dev/null; then<br>            log_failure_msg &ldquo;Binary &lsquo;$bin&rsquo; is not available. Please install \<br>package containing it.&rdquo;<br>            exit 5<br>        fi<br>    done<br>}</p><h1 id=heading-3></h1><h1 id=checks-if-the-configuration-files-are-available-and-properly-setup>Checks if the configuration files are available and properly setup.</h1><h1 id=heading-4></h1><h1 id=return-0-if-irssid-if-properly-configured-1-otherwise>Return: 0 if irssid if properly configured, 1 otherwise.</h1><h1 id=heading-5></h1><p>function checkConfig() {<br>    # Make sure the configuration file has been created<br>    if ! [[ -f $configFile ]]; then<br>        log_failure_msg &ldquo;Please populate the configuration file &lsquo;$configFile&rsquo; \<br>before running.&rdquo;<br>        exit 6<br>    fi</p><p>    # Make sure the required options have been set<br>    local reqOptions=(user group session)<br>    for option in &ldquo;${reqOptions[@]}"; do<br>        if ! grep -q -e &ldquo;^[[:blank:]]*$option=&rdquo; &ldquo;$configFile&rdquo;; then<br>            log_failure_msg &ldquo;Mandatory option &lsquo;$option&rsquo; was not specified in \<br>&lsquo;$configFile&rsquo;&rdquo;<br>            exit 6<br>        fi<br>    done<br>}</p><h1 id=heading-6></h1><h1 id=loads-the-configuration-file-and-performs-any-additional-configuration-steps>Loads the configuration file and performs any additional configuration steps.</h1><h1 id=heading-7></h1><p>function configure() {<br>    . &ldquo;$configFile&rdquo;<br>    daemonArgs="$daemonArgs -S $session irssi&rdquo;<br>    [[ -n $args ]] && daemonArgs="$daemonArgs $args&rdquo;<br>    daemonCommand="$daemonExec $daemonArgs&rdquo;<br>}</p><h1 id=heading-8></h1><h1 id=starts-the-daemon>Starts the daemon.</h1><h1 id=heading-9></h1><h1 id=return-lsb-compliant-code>Return: LSB-compliant code.</h1><h1 id=heading-10></h1><p>function start() {<br>    start-stop-daemon &ndash;start &ndash;quiet &ndash;oknodo &ndash;pidfile &ldquo;$pidFile&rdquo; \<br>        &ndash;make-pidfile &ndash;chuid &ldquo;$user:$group&rdquo; &ndash;background \<br>        &ndash;exec &ldquo;$daemonExec&rdquo; &ndash; $daemonArgs<br>}</p><h1 id=heading-11></h1><h1 id=stops-the-daemon>Stops the daemon.</h1><h1 id=heading-12></h1><h1 id=return-lsb-compliant-code-1>Return: LSB-compliant code.</h1><h1 id=heading-13></h1><p>function stop() {<br>    start-stop-daemon &ndash;stop &ndash;quiet &ndash;oknodo &ndash;retry 30 &ndash;pidfile &ldquo;$pidFile&rdquo; \<br>        &ndash;chuid &ldquo;$user:$group&rdquo;<br>}</p><p>checkEnvironment<br>checkConfig<br>configure</p><p>case &ldquo;$1&rdquo; in<br>    start)<br>        log_daemon_msg &ldquo;Starting daemon&rdquo; &ldquo;irssid&rdquo;<br>        start && log_end_msg 0 || log_end_msg $?<br>        ;;<br>    stop)<br>        log_daemon_msg &ldquo;Stopping daemon&rdquo; &ldquo;irssid&rdquo;<br>        stop && log_end_msg 0 || log_end_msg $?<br>        ;;<br>    restart)<br>        log_daemon_msg &ldquo;Restarting daemon&rdquo; &ldquo;irssid&rdquo;<br>        stop<br>        start && log_end_msg 0 || log_end_msg $?<br>        ;;<br>    force-reload)<br>        log_daemon_msg &ldquo;Restarting daemon&rdquo; &ldquo;irssid&rdquo;<br>        stop<br>        start && log_end_msg 0 || log_end_msg $?<br>        ;;<br>    status)<br>        status_of_proc -p &ldquo;$pidFile&rdquo; &ldquo;$daemonExec&rdquo; screen && exit 0 || exit $?<br>        ;;<br>    *)<br>        echo &ldquo;irssid (start|stop|restart|force-reload|status|help)&rdquo;<br>        ;;<br>esac<br>`</p><ul><li>Set as executable:</li></ul><p><code>sudo chown root:root /etc/init.d/irssi sudo chmod 755 /etc/init.d/irssi</code></p><ul><li>Create too this file:</li></ul><p><code>sudo nano /etc/irssid.conf</code></p><p>With this content:<br>`#</p><h1 id=configuration-file-for-irssid-init-script>Configuration file for irssid init script</h1><h1 id=heading-14></h1><h1 id=mandatory-options>Mandatory options:</h1><h1 id=heading-15></h1><h1 id=user---specify-user-for-running-irssi>user - Specify user for running irssi.</h1><h1 id=group---specify-group-for-running-irssi>group - Specify group for running irssi.</h1><h1 id=session---specify-screen-session-name-to-be-used-for-irssi>session - Specify screen session name to be used for irssi.</h1><h1 id=heading-16></h1><h1 id=non-mandatory-options>Non-mandatory options:</h1><h1 id=heading-17></h1><h1 id=args---pass-additional-arguments-to-irssi>args - Pass additional arguments to irssi.</h1><h1 id=heading-18></h1><p>user='your_user&rsquo;<br>group='your_user&rsquo;<br>session='irssi&rsquo;<br>args=&rsquo;&ndash;config /home/your_user/.irssi/config'`</p><ul><li>Check the daemon:</li></ul><p><code>/etc/init.d/irssi start ps -ef | grep irssi /etc/init.d/irssi stop ps -ef | grep irssi</code></p><ul><li>Add to your system boot:</li></ul><p><code>sudo update-rc.d irssi defaults</code></p></div><div class="navigation navigation-single"><a href=/posts/touchpad-indicator-really-useful-app/ class=navigation-prev><i aria-hidden=true class="fa fa-chevron-left"></i><span class=navigation-tittle>Touchpad-indicator: A really useful app</span></a>
<a href=/posts/how-do-i-completely-remove-one-ubuntu/ class=navigation-next><span class=navigation-tittle>How do I completely remove One Ubuntu?</span>
<i aria-hidden=true class="fa fa-chevron-right"></i></a></div></article></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-156677503-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script defer src=https://use.fontawesome.com/releases/v5.11.2/js/all.js integrity=sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1 crossorigin=anonymous></script><script type=text/javascript>hljs.initHighlightingOnLoad();</script></body></html>