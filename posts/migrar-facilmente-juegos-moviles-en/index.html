<!doctype html><html lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta http-equiv=cache-control content="public"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=generator content="Hugo 0.62.0"><title>Migrar fácilmente juegos móviles en HTML5 a Ubuntu Phone (por Alan Pope) • Marcos Costales</title><meta name=twitter:card content="summary"><meta name=twitter:title content="Migrar fácilmente juegos móviles en HTML5 a Ubuntu Phone (por Alan Pope)"><meta name=twitter:description content="Este artículo es una traducción del post de Alan Pope, disponible aquí en Inglés.
Me gusta jugar en el móvil y en la tablet y quería añadir algunos juegos más a Ubuntu. Con poco trabajo se &lsquo;migran&rsquo; fácilmente juegos a Ubuntu Phone. He puesto la palabra &lsquo;migrar&rsquo; entre comillas porque en algunos casos es muy poco esfuerzo, por lo que llamarlo &lsquo;migrar&rsquo; puede aparentar que es más trabajo del que realmente es."><meta property="og:title" content="Migrar fácilmente juegos móviles en HTML5 a Ubuntu Phone (por Alan Pope)"><meta property="og:description" content="Este artículo es una traducción del post de Alan Pope, disponible aquí en Inglés.
Me gusta jugar en el móvil y en la tablet y quería añadir algunos juegos más a Ubuntu. Con poco trabajo se &lsquo;migran&rsquo; fácilmente juegos a Ubuntu Phone. He puesto la palabra &lsquo;migrar&rsquo; entre comillas porque en algunos casos es muy poco esfuerzo, por lo que llamarlo &lsquo;migrar&rsquo; puede aparentar que es más trabajo del que realmente es."><meta property="og:type" content="article"><meta property="og:url" content="https://costales.github.io/posts/migrar-facilmente-juegos-moviles-en/"><meta property="article:published_time" content="2015-07-29T16:00:00+02:00"><meta property="article:modified_time" content="2015-07-29T16:00:00+02:00"><link rel=stylesheet href=/scss/hyde-hyde.7520f35efecc324a99b3726ed2b2ad961648af81ff945c3bf2c67f371b5262ab.css integrity="sha256-dSDzXv7MMkqZs3Ju0rKtlhZIr4H/lFw78sZ/NxtSYqs="><link rel=stylesheet href=/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58+TzH3icCkSHGoJ+ed7w=" media=print><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><div class=sidebar><div class=container><div class=sidebar-about><span class=site__title><a href=https://costales.github.io/>Marcos Costales</a></span><div class=author-image><img src=https://costales.github.io/img/avatar.jpeg alt="Author Image" class="img--circle img--headshot element--center"></div><p class=site__description></p></div><div class=collapsible-menu><input type=checkbox id=menuToggle>
<label for=menuToggle>Marcos Costales</label><div class=menu-content><div><ul class=sidebar-nav><li><a href=/><span>Blog</span></a></li><li><a href=/projects/all/><span>Projects</span></a></li><li><a href=/about/><span>About Me</span></a></li></ul></div><section class=social><a href=https://github.com/costales rel=me><i class="fab fa-github fa-lg" aria-hidden=true></i></a><a href=https://www.youtube.com/user/costalesmarcos/videos rel=me><i class="fab fa-youtube fa-lg" aria-hidden=true></i></a><a href=https://linkedin.com/in/costales rel=me><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a><a href=/index.xml rel=me><i class="fas fa-rss fa-lg" aria-hidden=true></i></a><a href=/posts/ rel=me><i class="fab fa-blogger" aria-hidden=true></i></a><a href=mailto:25uvnwtt@duck.com rel=me><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></section></div></div></div></div><div class="content container"><article><header><h1>Migrar fácilmente juegos móviles en HTML5 a Ubuntu Phone (por Alan Pope)</h1><div class=post__meta><i class="fas fa-calendar-alt"></i>Jul 29, 2015<br><i class="fas fa-tags"></i><a class="badge badge-tag" href=/tags/phone>phone</a></div></header><div class=post><p>Este artículo es una traducción del post de Alan Pope, <a href=https://popey.com/blog/2015/07/28/easily-port-mobile-html5-games-to-ubuntu-phone/>disponible aquí en Inglés</a>.</p><p>Me gusta jugar en el móvil y en la tablet y quería añadir algunos juegos más a Ubuntu. Con poco trabajo se &lsquo;migran&rsquo; fácilmente juegos a Ubuntu Phone. He puesto la palabra &lsquo;migrar&rsquo; entre comillas porque en algunos casos es muy poco esfuerzo, por lo que llamarlo &lsquo;migrar&rsquo; puede aparentar que es más trabajo del que realmente es.</p><p>Actualización: Algunos usuarios me preguntaron por qué alguien quedría hacer esto, pudiendo simplemente crear un marcador en el navegador. Mis disculpas si no dejé esto claro. La gran ventaja es que el juego es cacheado offline. Con la ventaja que tiene esto en muchas situaciones, por ejemplo en viajes o con mal acceso a Internet. Por supuesto, no todos los juegos pueden ser completamente offline, este tutorial no será de gran ayuda para juegos online, como Clash of Clans. Sin embargo, sí será útil para muchos otros. También se hace uso del confinamiento de aplicaciones en Ubuntu, por lo que la aplicación/juego no tendrá acceso exterior a su directorio de datos.</p><p>Invertí algunas tardes y fines de semana con <a href=https://sturmflut.github.io/>sturmflut</a>, quien también plasmó su experiencia en el <a href=https://sturmflut.github.io/ubuntu/2015/07/12/panda-madness/>artículo Panda Madness</a>.</p><p>Nos divertimos mucho migrando algunos juegos y quiero compartir qué hicimos, para que facilite la tarea de otros desarrolladores. Creé una <a href=https://github.com/popey/ubuntu-html5-template>plantilla básica en Github</a> que puede usarse como punto de partida, pero quiero explicar el proceso y los problemas que tuvimos, para que otros puedan migrar más aplicaciones y juegos.</p><p>Si tienes alguna duda, déjame un comentario, o si lo prefieres, también puedes <a href=https://popey.com/blog/contact/>escribirme</a> por privado.</p><h2 id=prueba-de-concepto>Prueba de concepto</h2><p>Para demostrar que podemos migrar fácilmente juegos existentes, distribuí un par de juegos de <a href=https://codecanyon.net/category/html5/games>Code Canyon</a>. Tienda donde desarrolladores pueden distribuir sus juegos, a la vez que otros desarrolladores aprenden de ellos. Comencé con un pequeño juego llamado <a href=https://codecanyon.net/item/dont-crash/9929265>Don't Crash</a> el cual es un juego HTML5 creado con <a href=https://www.scirra.com/construct2>Construct 2</a>. Podría distribuir más juegos, e incluso hay más tiendas de juegos, pero esto es sólo un buen ejemplo para mostrar el proceso.</p><p><a href=https://popey.com/blog/wp-content/uploads/2015/07/Screenshot-from-2015-07-28-13-06-19.png><img src=https://popey.com/blog/wp-content/uploads/2015/07/Screenshot-from-2015-07-28-13-06-19.png alt></a></p><p>1</p><p>Apunte: <a href=https://www.scirra.com/construct2>Construct 2</a> de Scirra es una herramienta que sólo funciona en Windows, es popular, potente y rápida, para el desarrollo multiplataforma de aplicaciones y juegos HTML5. Es usado por muchos desarrolladores indie para crear juegos que se ejecutan en navegadores de escritorio y dispositivos móviles. En desarrollo está <a href=https://www.construct3.com/>Construct 3</a>, el cual será más compatible y también estará disponible para Linux.</p><p>Antes de distribuir Don't Crash comprobé que funcionaba bien en Ubuntu Phone usando la <a href=https://codecanyon.net/item/dont-crash/full_screen_preview/9929265>demo</a> que hay en Code Canyon. Tras verificar que funcionaba, pagué y recibí los ficheros con el &lsquo;código&rsquo; de Construct 2.</p><p><a href=https://popey.com/blog/wp-content/uploads/2015/07/device-2015-07-28-130757.png><img src=https://popey.com/blog/wp-content/uploads/2015/07/device-2015-07-28-130757.png alt></a></p><p>2</p><p>Si eres un desarrollador de tus propios juegos, puedes saltarte este paso, porque ya tendrás el código a migrar.</p><h2 id=migrando-a-ubuntu>Migrando a Ubuntu</h2><p>Lo mínimo que se necesita para migrar un juego son algunos ficheros de texto y el directorio que contiene el código fuente. Algunas veces hacen falta un par de trucos para los permisos y bloquear la rotación, pero en líneas generales, Simplemente Funciona (TM).</p><p>Yo estoy usando un ordenador con Ubuntu para todo el empaquetado y pruebas, pero para este juego necesité un ordenador con Windows para exportarlo desde Construct 2. Los requisitos pueden variar, pero si no tienes Ubuntu, puedes instalarlo en una máquina virtual como VMWare o VirtualBox, y sólo tendrás que añadir el SDK como se detalla en el <a href=https://developer.ubuntu.com/>developer.ubuntu.com</a>.</p><p>Este es el contenido entero del directorio, con el juego en la carpeta www/</p><p><code>alan@deep-thought:~/phablet/code/popey/licensed/html5_dontcrash⟫ ls -l total 52 -rw-rw-r-- 1 alan alan   171 Jul 25 00:51 app.desktop -rw-rw-r-- 1 alan alan   167 Jun  9 17:19 app.json -rw-rw-r-- 1 alan alan 32826 May 19 19:01 icon.png -rw-rw-r-- 1 alan alan   366 Jul 25 00:51 manifest.json drwxrwxr-x 4 alan alan  4096 Jul 24 23:55 www</code></p><h2 id=creando-el-metadata>Creando el metadata</h2><h3 id=manifiesto> Manifiesto</h3><p>Contiene los detalles básicos acerca de la aplicación, como el nombre, descripción, autor, email y alguna cosa más. Aquí están los mios (en el manifest.json) de la última versión de Don't Crash. Los campos a rellenar son aclaratorios por sí mismos. Por lo que sustituye cada uno de ellos con los detalles de tu propia aplicación.</p><p><code>{     "description":  "Don't Crash!",     "framework":    "ubuntu-sdk-14.10-html",     "hooks": {         "dontcrash": {             "apparmor": "app.json",             "desktop":  "app.desktop"         }     },     "maintainer":   "Alan Pope ",     "name":         "dontcrash.popey",     "title":        "Don't Crash!",     "version":      "0.22" }</code></p><p>Apunte: &ldquo;popey&rdquo; es mi nombre de desarrollador en la tienda, tienes que sustituirlo por el mismo nombre que usas en tu página del <a href=https://myapps.developer.ubuntu.com/dev/account/>portal de desarrollador</a>.</p><p><a href=https://popey.com/blog/wp-content/uploads/2015/07/Screenshot-from-2015-07-28-13-11-17.png><img src=https://popey.com/blog/wp-content/uploads/2015/07/Screenshot-from-2015-07-28-13-11-17.png alt></a></p><p>3</p><h3 id=perfil-de-seguridad> Perfil de seguridad</h3><p>El fichero app.json, detalla qué permisos necesita la aplicación para ejecutarse:</p><p><code>{     "template": "ubuntu-webapp",     "policy_groups": [         "networking",         "audio",         "video",         "webview"     ],     "policy_version": 1.2 }</code></p><h3 id=fichero-desktop>Fichero Desktop</h3><p>Define cómo se lanza la aplicación, cual es el icono utilizado y algunos otros detalles:</p><p><code>[Desktop Entry] Name=Don't Crash Comment=Avoid the other cars Exec=webapp-container $@ www/index.html Terminal=false Type=Application X-Ubuntu-Touch=true Icon=./icon.png</code></p><p>De nuevo, cambia los campos Name y Comment, y practicamente hemos finalizado.</p><h2 id=construyendo-el-paquete-click>Construyendo el paquete click</h2><p>Con los ficheros creados y un icono icon.png, compilamos para crear el paquete .click que subiremos a la tienda. Este es el proceso entero:</p><p><code>alan@deep-thought:~/phablet/code/popey/licensed⟫ click build html5_dontcrash/ Now executing: click-review ./dontcrash.popey_0.22_all.click ./dontcrash.popey_0.22_all.click: pass Successfully built package in './dontcrash.popey_0.22_all.click'.</code></p><p>En mi portátil apenas se compila en un segundo.</p><p>Ten en cuenta la salida del comando, la cual realiza comprobaciones de validez de paquetes .click al compilar, asegurándose de que no haya fallos que lo rechacen en la Tienda.</p><h2 id=comprobacin-en-un-dispositivo-ubuntu>Comprobación en un dispositivo Ubuntu</h2><p>Comprobar el paquete .click en un móvil es muy fácil. Copia el fichero .click desde el PC con Ubuntu vía USB, usando <em>adb</em> para instalarlo:</p><p><code>adb push dontcrash.popey_0.22_all.click /tmp adb shell pkcon install-local --allow-untrusted /tmp/dontcrash.popey_0.22_all.click</code></p><p>Vete al scope de aplicaciones y arrastra hacia abajo para que refresque, pulsa en el icono y prueba el juego.</p><p><a href=https://popey.com/blog/wp-content/uploads/2015/07/device-2015-07-28-130907.png><img src=https://popey.com/blog/wp-content/uploads/2015/07/device-2015-07-28-130907.png alt></a></p><p>4</p><p>¡Conseguido! :)</p><p><a href=https://popey.com/blog/wp-content/uploads/2015/07/device-2015-07-28-130522.png><img src=https://popey.com/blog/wp-content/uploads/2015/07/device-2015-07-28-130522.png alt></a></p><p>5</p><h2 id=configurando-la-aplicacin>Configurando la aplicación</h2><p>En este punto, para alguno de los juegos ví algunas mejoras, que las expondré aquí:</p><h3 id=cargar-localmente-los-ficheros>Cargar localmente los ficheros</h3><p>Construct 2 indica que &ldquo;Los juegos exportados no funcionarán hasta que los subas por un popup (&ldquo;When running on the file:/// protocol, browsers block many features from working for security reasons&rdquo;) que se muestra en javascript. Borré esas líneas de js que comprueban que el index.html y el juego funcionan adecuadamente en nuestro navegador.</p><h3 id=orientacin-del-dispositivo>Orientación del dispositivo</h3><p>Con la reciente actualización OTA de Ubuntu siempre podemos activar la orientación del dispositivo, lo cual significa que algunos juegos pueden rotarse y no ser jugables. Podemos bloquear los juegos en modo vertical u horizontal mediante el fichero .desktop (creado previamente) con simplemente añadir esta línea:</p><p><code>X-Ubuntu-Supported-Orientations=portrait</code></p><p>Obviamente cambiar &ldquo;portrait&rdquo; por &ldquo;landscape&rdquo; si el juego usa el modo horizontal. Para Don't Crash no lo hice porque el desarrollador tenía la deteción de la rotación por código y dice al jugador que rote el dispositivo a la posición necesaria.</p><h3 id=enlaces-twitter>Enlaces Twitter</h3><p>Algunos juegos tenían enlaces de Twitter embebidos, mediante los cuales los jugadores pueden publicar su puntuación. Desafortunadamente la versión web móvil de Twitter no admite eso, por lo que no debería de haber un enlace que contiene &ldquo;Check out my score in Don’t Crash&rdquo;. Por el momento, quité los enlaces a Twitter.</p><h3 id=cookies>Cookies</h3><p>Nuestro navegador no soporta cookies locales. Algunos juegos las usan. Para <a href=https://uappexplorer.com/app/heroine-dusk.clintbellanger>Heroine Dusk</a> cambié las cookies a Local Storage.</p><h2 id=publicando-en-la-tienda>Publicando en la tienda</h2><p>Publicar paquetes .click en la Tienda de Ubuntu es rápido y fácil. Simplemente accede a <a href=https://myapps.developer.ubuntu.com/dev/click-apps/>https://myapps.developer.ubuntu.com/dev/click-apps/</a> , identificate, pulsa en &ldquo;New Application&rdquo; y sigue los pasos para subir el paquete click.</p><p><a href=https://popey.com/blog/wp-content/uploads/2015/07/Screenshot-from-2015-07-28-13-10-31.png><img src=https://popey.com/blog/wp-content/uploads/2015/07/Screenshot-from-2015-07-28-13-10-31.png alt></a></p><p>6</p><p>¡Esto es todo! Seguiré publicando algunos juegos más en la tienda. Mejorasa la <a href=https://github.com/popey/ubuntu-html5-template>plantilla</a> de Github son bienvenidas.</p><p>Artículo original de <a href=https://popey.com/blog/2015/07/28/easily-port-mobile-html5-games-to-ubuntu-phone/>Alan Pope</a>. Traducido por <a href=https://wiki.ubuntu.com/costales>Marcos Costales</a>.</p></div><div class="navigation navigation-single"><a href=/posts/driving-with-my-ubuntu-phone-video/ class=navigation-prev><i aria-hidden=true class="fa fa-chevron-left"></i><span class=navigation-tittle>Driving with my Ubuntu Phone [video]</span></a>
<a href=/posts/how-to-repair-broken-bq-e45-ubuntu/ class=navigation-next><span class=navigation-tittle>How to repair a broken BQ E4.5 Ubuntu Phone touch screen</span>
<i aria-hidden=true class="fa fa-chevron-right"></i></a></div></article></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-156677503-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script defer src=https://use.fontawesome.com/releases/v5.11.2/js/all.js integrity=sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1 crossorigin=anonymous></script><script type=text/javascript>hljs.initHighlightingOnLoad();</script></body></html>